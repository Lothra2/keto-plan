<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Keto Pro App ğŸ¥‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="icon" href="icon.png" type="image/png" />
  <meta name="theme-color" content="#0f766e" />
</head>

<body data-theme="dark">
  <!-- Splash Screen -->
  <div id="splash-screen" class="splash">
    <div class="splash-logo">
      <div class="splash-icon">ğŸ¥‘</div>
      <h1>Keto Pro App</h1>
      <p>Tu plan keto personalizado</p>
      <div class="splash-bar"><span></span></div>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="header-left">
      <h1 id="mainTitle">Keto Pro App ğŸ¥‘</h1>
      <p class="sub" id="subTitle">Personalizado</p>
    </div>
    <label class="toggle" title="Tema claro/oscuro">
      <input type="checkbox" id="themeToggle">
      <span class="ball"></span>
    </label>
  </header>

  <!-- Tip banner -->
  <div class="hero">
    <div class="tip" id="tipBox">ğŸ¥¤ Recuerda tomar agua con sal.</div>
  </div>

  <!-- Tabs top -->
  <div class="tabs">
    <button class="tab active" data-tab="menu">MenÃº</button>
    <button class="tab" data-tab="compras">Compras</button>
    <button class="tab" data-tab="progreso">Progreso</button>
    <button class="tab" data-tab="ajustes">Ajustes</button>
  </div>

  <!-- MENÃš -->
  <div class="container" id="menu">
    <div class="progress-summary">
      <span id="progressText">0 de 14 dÃ­as</span>
      <div class="progress-line">
        <span id="progressBar"></span>
      </div>
    </div>
    <div id="motivation" class="motivation-box" style="display:none"></div>
    <div class="week-switch" id="weekSwitch"></div>
    <div class="day-floating" id="dayFloating"></div>
    <div id="menuDays"></div>
  </div>

  <!-- COMPRAS -->
  <div class="container" id="compras" style="display:none"></div>

  <!-- PROGRESO -->
  <div class="container" id="progreso" style="display:none"></div>

  <!-- AJUSTES -->
  <div class="container" id="ajustes" style="display:none">
    <div class="list-row">
      <strong>Nombre</strong>
      <input id="settingsName" placeholder="Tu nombre">
      <button class="save-btn" onclick="applySettingsName()">Actualizar nombre</button>
    </div>

    <div class="list-row">
      <strong>Idioma / Language</strong>
      <p class="small">Elige el idioma para las sugerencias de IA.</p>
      <select id="appLang" onchange="changeAppLang()">
        <option value="es">EspaÃ±ol</option>
        <option value="en">English</option>
      </select>
    </div>

    <div class="list-row">
      <strong>DuraciÃ³n del plan</strong>
      <p class="small">Elige entre 2 y 4 semanas. Si es mÃ¡s de 2, se repite el menÃº base.</p>
      <select id="planWeeks" onchange="changePlanWeeks()">
        <option value="2">2 semanas (14 dÃ­as)</option>
        <option value="3">3 semanas (21 dÃ­as)</option>
        <option value="4">4 semanas (28 dÃ­as)</option>
      </select>
    </div>

    <div class="list-row">
      <strong>Fecha de inicio</strong>
      <input type="date" id="startDateInput" onchange="changeStartDate()">
    </div>

    <div class="list-row">
      <strong>Vista</strong>
      <p class="small">Si activas vista diaria, solo ves el dÃ­a de hoy.</p>
      <select id="dailyView" onchange="changeDailyView()">
        <option value="0">Mostrar por semana</option>
        <option value="1">Solo dÃ­a actual</option>
      </select>
    </div>

    <div class="list-row">
      <strong>Color del plan</strong>
      <p class="small">Cambia el color principal.</p>
      <select id="primaryColor" onchange="changePrimaryColor()">
        <option value="#0f766e">Verde Keto</option>
        <option value="#9333ea">Morado</option>
        <option value="#f97316">Naranja</option>
        <option value="#0ea5e9">Cian</option>
      </select>
    </div>

    <div class="list-row">
      <strong>Preferencias de comidas (IA)</strong>
      <p class="small">La IA las usarÃ¡ para sugerir cenas.</p>
      <input id="likeFoods" placeholder="Me gusta / I like (pollo, res, huevos)">
      <input id="dislikeFoods" placeholder="No me gusta / I dislike (camarÃ³n, salmÃ³n)">
      <button class="save-btn" onclick="saveFoodPrefs()">Guardar preferencias</button>
    </div>

    <div class="list-row">
      <strong>Acceso API seguro</strong>
      <p class="small">Define usuario y clave. Se enviarÃ¡ con las llamadas a Netlify para usar tu API de OpenAI.</p>
      <input id="apiUser" placeholder="Usuario">
      <input id="apiPass" placeholder="Clave / Token">
      <button class="save-btn" onclick="saveApiAccess()">Guardar acceso</button>
    </div>

    <div class="list-row">
      <strong>Reiniciar todo</strong>
      <p class="small">Borra progreso, nombre, fecha y dÃ­as completados.</p>
      <button class="save-btn danger" onclick="resetAll()">Borrar todo</button>
    </div>

    <div class="list-row">
      <strong>Agregar a pantalla de inicio</strong>
      <p class="small">En tu navegador mÃ³vil toca compartir y luego â€œAgregar a pantalla de inicioâ€.</p>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="bottom-nav">
    <button class="bottom-btn active" data-tab="menu">ğŸ½ <span>MenÃº</span></button>
    <button class="bottom-btn" data-tab="compras">ğŸ›’ <span>Compras</span></button>
    <button class="bottom-btn" data-tab="progreso">ğŸ“ˆ <span>Progreso</span></button>
    <button class="bottom-btn" data-tab="ajustes">âš™ï¸ <span>Ajustes</span></button>
  </div>

  <!-- Modal Nombre -->
  <div class="modal-backdrop" id="nameModal">
    <div class="modal">
      <h2>Â¿CuÃ¡l es tu nombre?</h2>
      <p>Queremos mostrarlo arriba y en las notas.</p>
      <input id="name1" placeholder="Tu nombre" />
      <button onclick="saveNameFromModal()">Guardar</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="appToast" class="toast">Guardado âœ…</div>

  <script src="script.js"></script>
</body>
</html>
